version: '3'
 
services:
  moonlay-service-auth-webapi:
    image: com-moonlay-service-auth-webapi:test
    environment:
      - ASPNETCORE_ENVIRONMENT=Test
      - DefaultConnection=Server=tcp:moonlay-academy-sql-server.database.windows.net,1433;Initial Catalog=moonlay-auth-db;Persist Security Info=False;User ID=account@moonlay.com@moonlay-academy-sql-server.database.windows;Password=Standar123;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "5000:80"
#    depends_on:
#      - mssql

  #mssql:
  #  image: microsoft/mssql-server-linux:2017-latest
  #  environment:
  #    - ACCEPT_EULA=Y
  #    - MSSQL_SA_PASSWORD=Standar123.
  #    - MSSQL_PID=Developer
  #  ports:
  #    - "1401:1433"